name: 'Create test Reports'
on:
  workflow_run:
    workflows: ['CI']                     # runs after CI workflow
    types:
      - completed

jobs:
  report:
     runs-on: ubuntu-latest
     name: Create test report
     strategy:
      fail-fast: false
      matrix:
        category: [ "Basic", "SqlServer", "PostgreSQL", "MariaDB", "Sqlite", "Oracle"  ]
        #category: [ "Basic" ]

     steps:
      - uses: dorny/test-reporter@v1
        with:
          artifact: test-results-${{ matrix.category }}     # artifact name
          name: Test report (${{ matrix.category }})                     # Name of the check run which will be created
          path: '*.xml'                                            # Path to test results (inside artifact .zip)
          reporter: dotnet-trx                                     # Format of test results     
